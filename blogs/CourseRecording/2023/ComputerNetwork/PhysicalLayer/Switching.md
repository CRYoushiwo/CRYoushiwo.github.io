---
layout: page
permalink: /blogs/CourseRecording/2023/ComputerNetwork/PhysicalLayer/Switching/index.html
title: Switching
---

# 第八章 交换

## 电路交换

> 电路交换网络是由物理链路连接的一组交换机组成的，每条链路划分成 $n$个通道，两个站点的连接是由一条或多条链路组成的专用路径来实现
> 
- 三阶段
    - 建立阶段
    - 数据传输
    - 拆除阶段
- 时延：建立连接时间 + 数据传输时间 + 拆除电路时间

## 分组交换

- 报文（进行通信的信息）划分为一些固定长的分组或可变长的分组
- 数据报交换
    - 时延：$n$传输时间 + $n$个传播延迟 + $(n-1)$个等待时间
- 虚电路交换
    - 三阶段
        - 建立阶段
        - 数据传输
        - 拆除阶段
    - 时延：$n$传输时间 + $n$个传播延迟 + 建立连接时间+拆除电路时间

### 数据报服务和虚电路服务优缺点

|  | 虚电路服务  | 数据报服务 |
| --- | --- | --- |
| 思路 | 可靠通信应当由网络来保证 | 可靠通信应当由用户主机来保证 |
| 连接的建立 | 必须有 | 不要 |
| 目的站地址      | 仅在连接建立阶段仅在连接建立阶段用短的虚电路号 | 每个分组都有目的站的全地址 |
| 分组的转发 | 属于同一条虚电路的分组均按照同一路由进行转发 | 每个分组独立选择路由进行转发 |
| 当结点出故障时 | 所有通过出故障的结点的虚电路均不能工作 | 故障结点可能丢失分组，一些些路由可能会发生变化 |
| 分组的顺序   | 总是按发送顺序到达目的站 | 到达目的站时不一定按发送顺序 |
| 差错控制和流量控制 | 可以由分组交换网负责也可以由用户主机负责 | 由用户主机负责 |

| 交换类型 | 特点 | 实现 | 资源占用情况 | 说明 |
| --- | --- | --- | --- | --- |
| 电路交换 | 效率低、延迟最小 | 物理层 | 预留资源（通道等） |  |
| 数据报交换 | 效率较高，延迟较长 | 网络层 | 按需分配资源（原则：FCFS） | 交换机持有路由表，基于目的地址的路由表 |
| 虚电路交换 | 介于电路交换与数据报交换两者之间 | 数据链路层 | 建立阶段预留资源，数据传输阶段按需分配资源 | 全局编址（仅用于建立VCL使用）局部编址（虚电路标识符 VCL），属于相同源端和目的端的所有分组都按同一路径传送 |
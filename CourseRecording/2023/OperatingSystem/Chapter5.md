---
layout: page
permalink: /CourseRecording/2023/OperatingSystem/Chapter5/index.html
title: OperatingSystemChapter5
---

# 设备管理

## 概述

- I/O系统结构
    - 微机I/O
    - 主机I/O
- I/O的控制方式
    - 程序控制I/O
    - 中断驱动I/O
    - 直接存储方位I/O
    - 通道控制方式I/O
- 设备的分类
    - 按数据组织分类
        - 块设备
        - 字符设备
    - 资源分配角度
        - 独占设备
        - 共享设备
        - 虚拟设备

## I/O软件的组成

- 目标
    - 设备独立性【低层软件，高层软件，提高设计效率，更新I/O设备】
    - 统一命名【所有文件和设备使用相同方法进行定位】
- 中断处理程序
    - 基本概念
        - 中断解释
        - 中断源：引起中断发生的事件
        - 中断信号：请求中断处理的信号
        - 中断响应：CPU接收到中断请求后转到相应事件处理程序
        - 禁止中断（关中断）【PSW中断允许位】，开中断
        - 中断屏蔽：中断请求产生后，系统有选择地封锁一部分中断，而允许另一部分中断仍能得到响应
    - 中断分类【处理器，内存的外部和内部】
        - 外中断
        - 内中断（陷阱，异常）（不可屏蔽）
    - 软中断：通信进程之间通过模拟硬中断而实现的一种通信方式
    - 中断处理过程
    - 设备管理程序与中断方式
- 设备驱动程序
- 与设备无关的系统软件
- 用户级软件

## 具有通道的设备管理

- 通道：I/O处理机，具有自己特有的指令（通道指令）
- 通道类型
    - 字节多路通道
        - 多个非分配型子通道（连接低速设备）
    - 数组选择通道
        - 一个可分配型通道（连接高速设备）
    - 数组多路通道
        - 多个非分配型子通道（连接高速设备）
- 通道命令与通道程序
- 通道的工作原理

## 与设备管理有关的技术

- DMA技术
    - 数据在内存和I/O设备中直接成块传送
    - 硬件条件：DMA控制器
- 缓冲技术
    - 引入缓冲技术的主要原因
        - 缓和CPU与I/O设备间速度不匹配的矛盾
        - 减少CPU中断频率，放宽对中断响应时间的限制
        - 提高CPU和I/O设备的之间的并行性
    - 管理方式
        - I/O设备→缓冲区：T；缓冲区→内存：M；数据处理计算：C
        - 单缓冲【$Max(C,T)+M$】
        - 双缓冲【$Max(C,T)$】
            - T>C：CPU不用等待设备输入
            - T<C：设备可以连续输入
        - 环形缓冲
            - Getbuf与Releasebuf
            - 系统受限计算，系统受限I/O
        - 缓冲池
            - 组成
                - 空闲缓冲区
                - 装满输入数据的缓冲区
                - 装满输出数据的缓冲区
            - 工作方式
                - 设备输入
                - CPU读入
                - 设备输出
                - CPU写出
- 总线技术
- 即插即用技术

## 设备管理中的数据结构

- 数据结构
    - 系统设备表（SDT）
    - 设备控制表（DCT）
    - 控制器控制表（COCT）
    - 通道控制表（CHCT）
- 设备的分配与回收
    - 静态分配，动态分配
- 设备的处理
    - 设备处理程序